<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>Groovy Server Pages (GSP)</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />
    <script src="../js/docs.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
    <script type="text/javascript">
        function addJsClass(el) {
            var classes = document.body.className.split(" ");
            classes.push("js");
            document.body.className = classes.join(" ");
        }
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <div class="navTitle">
        
        Groovy Server Pages
    </div>
    <div class="navLinks">
        <ul>
            <li>
                <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                    <a href="../guide/index.html" class="button">Table of contents</a>
                    <div id="nav-summary-childs" style="display:none;">
                        
                        <div class="toc-item" style="margin-left:0"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="#GSPBasics"><strong>2</strong><span>GSP Basics</span></a></div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="#tags"><strong>3</strong><span>GSP Tags</span></a></div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="#viewsAndTemplates"><strong>4</strong><span>Views and Templates</span></a></div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="#layouts"><strong>5</strong><span>Layouts with Sitemesh</span></a></div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="#resources"><strong>6</strong><span>Static Resources</span></a></div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="#makingChangesToADeployedApplication"><strong>7</strong><span>Making Changes to a Deployed Application</span></a></div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="#taglibs"><strong>8</strong><span>Tag Libraries</span></a></div>
                        
                    </div>
                </div>
            </li>
            <li>
                <a href="../api/index.html" class="button">API Reference</a>
            </li>
        </ul>

    </div>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                <div class="project">
                    <h1>Groovy Server Pages (GSP)</h1>
                    <p></p>
                    <p>GSP (Groovy Server Pages) - A server-side view rendering technology based on Groovy</p>
                    <p><strong>Version:</strong> 6.2.3</p>

                </div>
                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#introduction"><strong>1</strong><span>Introduction</span></a></div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#GSPBasics"><strong>2</strong><span>GSP Basics</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#variablesAndScopes"><strong>2.1</strong><span>Variables and Scopes</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#logicAndIteration"><strong>2.2</strong><span>Logic and Iteration</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#pageDirectives"><strong>2.3</strong><span>Page Directives</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#expressions"><strong>2.4</strong><span>Expressions</span></a></div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#tags"><strong>3</strong><span>GSP Tags</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#tagVariablesAndScopes"><strong>3.1</strong><span>Variables and Scopes</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#tagLogicAndIteration"><strong>3.2</strong><span>Logic and Iteration</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#searchAndFiltering"><strong>3.3</strong><span>Search and Filtering</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#linksAndResources"><strong>3.4</strong><span>Links and Resources</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#formsAndFields"><strong>3.5</strong><span>Forms and Fields</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#tagsAsMethodCalls"><strong>3.6</strong><span>Tags as Method Calls</span></a></div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#viewsAndTemplates"><strong>4</strong><span>Views and Templates</span></a></div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#layouts"><strong>5</strong><span>Layouts with Sitemesh</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#sitemeshContentBlocks"><strong>5.1</strong><span>Sitemesh Content Blocks</span></a></div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#resources"><strong>6</strong><span>Static Resources</span></a></div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#makingChangesToADeployedApplication"><strong>7</strong><span>Making Changes to a Deployed Application</span></a></div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#taglibs"><strong>8</strong><span>Tag Libraries</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#taglibVariablesAndScopes"><strong>8.1</strong><span>Variables and Scopes</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#simpleTags"><strong>8.2</strong><span>Simple Tags</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#logicalTags"><strong>8.3</strong><span>Logical Tags</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#iterativeTags"><strong>8.4</strong><span>Iterative Tags</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#namespaces"><strong>8.5</strong><span>Tag Namespaces</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#usingJSPTagLibraries"><strong>8.6</strong><span>Using JSP Tag Libraries</span></a></div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#tagReturnValue"><strong>8.7</strong><span>Tag return value</span></a></div>
                    
                    <div style="clear:both" ></div>
                </div>
                
                

<h1 id="introduction">1 Introduction</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/introduction.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Groovy Servers Pages (or GSP for short) is Grails' view technology. It is designed to be familiar for users of technologies such as ASP and JSP, but to be far more flexible and intuitive.</p>
</div>
<div class="paragraph">
<p>GSP was previously part of Grails core, but since version 3.3 it is an independent Grails plugin that can be used by defining the following dependency in your <code>build.gradle</code>:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
    //...
    implementation "org.grails.plugins:gsp:6.2.3"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition, for production compilation you should apply the <code>grails-gsp</code> Gradle plugin:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">org.grails.grails-gsp</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>GSPs themselves live in the <code>grails-app/views</code> directory and are typically rendered automatically (by convention) or with the <a href="https://docs.grails.org/6.2.1/ref/Controllers/render.html">render</a> method such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">render(<span class="key">view</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">index</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>A GSP is typically a mix of mark-up and GSP tags which aid in view rendering.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Although it is possible to have Groovy logic embedded in your GSP and doing this will be covered in this document, the practice is strongly discouraged. Mixing mark-up and code is a <strong>bad</strong> thing and most GSP pages contain no code and needn&#8217;t do so.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A GSP typically has a "model" which is a set of variables that are used for view rendering. The model is passed to the GSP view from a controller. For example consider the following controller action:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> <span class="function">show</span>() {
    [<span class="key">book</span>: <span class="predefined-type">Book</span>.get(params.id)]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This action will look up a <code>Book</code> instance and create a model that contains a key called <code>book</code>. This key can then be referenced within the GSP view using the name <code>book</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="gsp">${book.title}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Embedding data received from user input has the risk of making your application vulnerable to a Cross Site Scripting (XSS) attack. Please read the documentation on <a href="https://docs.grails.org/6.2.1/guide/security.html#xssPrevention">XSS prevention</a> for information on how to prevent XSS attacks.
</td>
</tr>
</table>
</div>


<h1 id="GSPBasics">2 GSP Basics</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/GSPBasics.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>In the next view sections we&#8217;ll go through the basics of GSP and what is available to you. First off let&#8217;s cover some basic syntax that users of JSP and ASP should be familiar with.</p>
</div>
<div class="paragraph">
<p>GSP supports the usage of <code>&lt;% %&gt;</code> scriptlet blocks to embed Groovy code (again this is discouraged):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html&gt;</span>
   <span class="tag">&lt;body&gt;</span>
     <span class="error">&lt;</span>% out <span class="error">&lt;</span><span class="error">&lt;</span> &quot;Hello GSP!&quot; %<span class="error">&gt;</span>
   <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the <code>&lt;%= %&gt;</code> syntax to output values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html&gt;</span>
   <span class="tag">&lt;body&gt;</span>
     <span class="error">&lt;</span>%=&quot;Hello GSP!&quot; %<span class="error">&gt;</span>
   <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>GSP also supports JSP-style server-side comments (which are not rendered in the HTML response) as the following example demonstrates:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html&gt;</span>
   <span class="tag">&lt;body&gt;</span>
     <span class="error">&lt;</span>%-- This is my comment --%<span class="error">&gt;</span>
     <span class="error">&lt;</span>%=&quot;Hello GSP!&quot; %<span class="error">&gt;</span>
   <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Embedding data received from user input has the risk of making your application vulnerable to an Cross Site Scripting (XSS) attack. Please read the documentation on <a href="https://docs.grails.org/6.2.1/guide/security.html#xssPrevention">XSS prevention</a> for information on how to prevent XSS attacks.
</td>
</tr>
</table>
</div>


<h2 id="variablesAndScopes">2.1 Variables and Scopes</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/GSPBasics/variablesAndScopes.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Within the <code>&lt;% %&gt;</code> brackets you can declare variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;% now = new Date() %&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>and then access those variables later in the page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;%=now%&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Within the scope of a GSP there are a number of pre-defined variables, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>application</code> - The <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html">javax.servlet.ServletContext</a> instance</p>
</li>
<li>
<p><code>applicationContext</code> The Spring <a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/ApplicationContext.html">ApplicationContext</a> instance</p>
</li>
<li>
<p><code>flash</code> - The <a href="https://docs.grails.org/6.2.1/ref/Controllers/flash.html">flash</a> object</p>
</li>
<li>
<p><code>grailsApplication</code> - The <a href="https://docs.grails.org/6.2.1/api/grails/core/GrailsApplication.html">GrailsApplication</a> instance</p>
</li>
<li>
<p><code>out</code> - The response writer for writing to the output stream</p>
</li>
<li>
<p><code>params</code> - The <a href="https://docs.grails.org/6.2.1/ref/Controllers/params.html">params</a> object for retrieving request parameters</p>
</li>
<li>
<p><code>request</code> - The <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html">HttpServletRequest</a> instance</p>
</li>
<li>
<p><code>response</code> - The <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletResponse.html">HttpServletResponse</a> instance</p>
</li>
<li>
<p><code>session</code> - The <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html">HttpSession</a> instance</p>
</li>
<li>
<p><code>webRequest</code> - The <a href="https://docs.grails.org/6.2.1/api/org/grails/web/servlet/mvc/GrailsWebRequest.html">GrailsWebRequest</a> instance</p>
</li>
</ul>
</div>


<h2 id="logicAndIteration">2.2 Logic and Iteration</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/GSPBasics/logicAndIteration.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Using the <code>&lt;% %&gt;</code> syntax you can embed loops and so on using this syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html&gt;</span>
   <span class="tag">&lt;body&gt;</span>
      <span class="error">&lt;</span>% [1,2,3,4].each { num -<span class="error">&gt;</span> %<span class="error">&gt;</span>
         <span class="tag">&lt;p&gt;</span><span class="error">&lt;</span>%=&quot;Hello ${num}!&quot; %<span class="error">&gt;</span><span class="tag">&lt;/p&gt;</span>
      <span class="error">&lt;</span>%}%<span class="error">&gt;</span>
   <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As well as logical branching:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html&gt;</span>
   <span class="tag">&lt;body&gt;</span>
      <span class="error">&lt;</span>% if (params.hello == 'true')%<span class="error">&gt;</span>
      <span class="error">&lt;</span>%=&quot;Hello!&quot;%<span class="error">&gt;</span>
      <span class="error">&lt;</span>% else %<span class="error">&gt;</span>
      <span class="error">&lt;</span>%=&quot;Goodbye!&quot;%<span class="error">&gt;</span>
   <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>


<h2 id="pageDirectives">2.3 Page Directives</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/GSPBasics/pageDirectives.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>GSP also supports a few JSP-style page directives.</p>
</div>
<div class="paragraph">
<p>The import directive lets you import classes into the page. However, it is rarely needed due to Groovy&#8217;s default imports and <a href="tags.html">GSP Tags</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="error">&lt;</span>%@ page import=&quot;java.awt.*&quot; %<span class="error">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>GSP also supports the contentType directive:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="error">&lt;</span>%@ page contentType=&quot;application/json&quot; %<span class="error">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The contentType directive allows using GSP to render other formats.</p>
</div>


<h2 id="expressions">2.4 Expressions</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/GSPBasics/expressions.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>In GSP the <code>&lt;%= %&gt;</code> syntax introduced earlier is rarely used due to the support for GSP expressions. A GSP expression is similar to a JSP EL expression or a Groovy GString and takes the form <code>${expr}</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html&gt;</span>
  <span class="tag">&lt;body&gt;</span>
    Hello ${params.name}
  <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>However, unlike JSP EL you can have any Groovy expression within the <code>${..}</code> block.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Embedding data received from user input has the risk of making your application vulnerable to a Cross Site Scripting (XSS) attack. Please read the documentation on <a href="https://docs.grails.org/6.2.1/guide/security.html#xssPrevention">XSS prevention</a> for information on how to prevent XSS attacks.
</td>
</tr>
</table>
</div>


<h1 id="tags">3 GSP Tags</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/tags.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Now that the less attractive JSP heritage has been set aside, the following sections cover GSP&#8217;s built-in tags, which are the preferred way to define GSP pages.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The section on <a href="taglibs.html">Tag Libraries</a> covers how to add your own custom tag libraries.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>All built-in GSP tags start with the prefix <code>g:</code>. Unlike JSP, you don&#8217;t specify any tag library imports. If a tag starts with <code>g:</code> it is automatically assumed to be a GSP tag. An example GSP tag would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:example</span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>GSP tags can also have a body such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:example&gt;</span>
   Hello world
<span class="tag">&lt;/g:example&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Expressions can be passed into GSP tag attributes, if an expression is not used it will be assumed to be a String value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:example</span> <span class="attribute-name">attr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${new Date()}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
   Hello world
<span class="tag">&lt;/g:example&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Maps can also be passed into GSP tag attributes, which are often used for a named parameter style syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:example</span> <span class="attribute-name">attr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${new Date()}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">attr2</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[one:1, two:2, three:3]</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
   Hello world
<span class="tag">&lt;/g:example&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that within the values of attributes you must use single quotes for Strings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:example</span> <span class="attribute-name">attr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${new Date()}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">attr2</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[one:'one', two:'two']</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
   Hello world
<span class="tag">&lt;/g:example&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With the basic syntax out the way, the next sections look at the tags that are built into Grails by default.</p>
</div>


<h2 id="tagVariablesAndScopes">3.1 Variables and Scopes</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/tags/tagVariablesAndScopes.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Variables can be defined within a GSP using the <a href="../ref/Tags/set.html">set</a> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:set</span> <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">now</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${new Date()}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we assign a variable called <code>now</code> to the result of a GSP expression (which simply constructs a new <code>java.util.Date</code> instance). You can also use the body of the <code>&lt;g:set&gt;</code> tag to define a variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:set</span> <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myHTML</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
   Some re-usable code on: ${new Date()}
<span class="tag">&lt;/g:set&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The assigned value can also be a bean from the applicationContext:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:set</span> <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookService</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">bean</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookService</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Variables can also be placed in one of the following scopes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>page</code> - Scoped to the current page (default)</p>
</li>
<li>
<p><code>request</code> - Scoped to the current request</p>
</li>
<li>
<p><code>flash</code> - Placed within <a href="https://docs.grails.org/6.2.1/ref/Controllers/flash.html">flash</a> scope and hence available for the next request</p>
</li>
<li>
<p><code>session</code> - Scoped for the user session</p>
</li>
<li>
<p><code>application</code> - Application-wide scope.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To specify the scope, use the <code>scope</code> attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:set</span> <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">now</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${new Date()}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">scope</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">request</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>


<h2 id="tagLogicAndIteration">3.2 Logic and Iteration</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/tags/tagLogicAndIteration.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>GSP also supports logical and iterative tags out of the box. For logic there are <a href="../ref/Tags/if.html">if</a>, <a href="../ref/Tags/else.html">else</a> and <a href="../ref/Tags/elseif.html">elseif</a> tags for use with branching:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:if</span> <span class="attribute-name">test</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${session.role == 'admin'}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
   <span class="error">&lt;</span>%-- show administrative functions --%<span class="error">&gt;</span>
<span class="tag">&lt;/g:if&gt;</span>
<span class="tag">&lt;g:else&gt;</span>
   <span class="error">&lt;</span>%-- show basic functions --%<span class="error">&gt;</span>
<span class="tag">&lt;/g:else&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Use <a href="../ref/Tags/each.html">each</a> and <a href="../ref/Tags/while.html">while</a> tags for iteration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:each</span> <span class="attribute-name">in</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${[1,2,3]}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">num</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
   <span class="tag">&lt;p&gt;</span>Number ${num}<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/g:each&gt;</span>

<span class="tag">&lt;g:set</span> <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">num</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${1}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;g:while</span> <span class="attribute-name">test</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${num &lt; 5 }</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;p&gt;</span>Number ${num++}<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/g:while&gt;</span></code></pre>
</div>
</div>


<h2 id="searchAndFiltering">3.3 Search and Filtering</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/tags/searchAndFiltering.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>If you have collections of objects you often need to sort and filter them. Use the <a href="../ref/Tags/findAll.html">findAll</a> and <a href="../ref/Tags/grep.html">grep</a> tags for these tasks:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">Stephen King's Books:
<span class="tag">&lt;g:findAll</span> <span class="attribute-name">in</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${books}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">expr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">it.author == 'Stephen King'</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
     <span class="tag">&lt;p&gt;</span>Title: ${it.title}<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/g:findAll&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>expr</code> attribute contains a Groovy expression that can be used as a filter. The <a href="../ref/Tags/grep.html">grep</a> tag does a similar job, for example filtering by class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:grep</span> <span class="attribute-name">in</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${books}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">filter</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NonFictionBooks.class</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
     <span class="tag">&lt;p&gt;</span>Title: ${it.title}<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/g:grep&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or using a regular expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:grep</span> <span class="attribute-name">in</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${books.title}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">filter</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">~/.*?Groovy.*?/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
     <span class="tag">&lt;p&gt;</span>Title: ${it}<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/g:grep&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above example is also interesting due to its usage of GPath. GPath is an XPath-like language in Groovy. The <code>books</code> variable is a collection of <code>Book</code> instances. Since each <code>Book</code> has a <code>title</code>, you can obtain a list of Book titles using the expression <code>books.title</code>. Groovy will auto-magically iterate the collection, obtain each title, and return a new list!</p>
</div>


<h2 id="linksAndResources">3.4 Links and Resources</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/tags/linksAndResources.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>GSP also features tags to help you manage linking to controllers and actions. The <a href="../ref/Tags/link.html">link</a> tag lets you specify controller and action name pairing and it will automatically work out the link based on the <a href="https://docs.grails.org/6.2.1/guide/theWebLayer#urlmappings">URL Mappings</a>, even if you change them! For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:link</span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">show</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Book 1<span class="tag">&lt;/g:link&gt;</span>

<span class="tag">&lt;g:link</span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">show</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${currentBook.id}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>${currentBook.name}<span class="tag">&lt;/g:link&gt;</span>

<span class="tag">&lt;g:link</span> <span class="attribute-name">controller</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Book Home<span class="tag">&lt;/g:link&gt;</span>

<span class="tag">&lt;g:link</span> <span class="attribute-name">controller</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Book List<span class="tag">&lt;/g:link&gt;</span>

<span class="tag">&lt;g:link</span> <span class="attribute-name">url</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[action: 'list', controller: 'book']</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Book List<span class="tag">&lt;/g:link&gt;</span>

<span class="tag">&lt;g:link</span> <span class="attribute-name">params</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[sort: 'title', order: 'asc', author: currentBook.author]</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Book List<span class="tag">&lt;/g:link&gt;</span></code></pre>
</div>
</div>


<h2 id="formsAndFields">3.5 Forms and Fields</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/tags/formsAndFields.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="sect3">
<h4 id="_form_basics">Form Basics</h4>
<div class="paragraph">
<p>GSP supports many different tags for working with HTML forms and fields, the most basic of which is the <a href="../ref/Tags/form.html">form</a> tag. This is a controller/action aware version of the regular HTML form tag. The <code>url</code> attribute lets you specify which controller and action to map to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:form</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myForm</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">url</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[controller:'book',action:'list']</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>...<span class="tag">&lt;/g:form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case we create a form called <code>myForm</code> that submits to the <code>BookController</code>'s <code>list</code> action. Beyond that, all the usual HTML attributes apply.</p>
</div>
</div>
<div class="sect3">
<h4 id="_form_fields">Form Fields</h4>
<div class="paragraph">
<p>In addition to easy construction of forms, GSP supports custom tags for dealing with different types of fields, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../ref/Tags/textField.html">textField</a> - For input fields of type 'text'</p>
</li>
<li>
<p><a href="../ref/Tags/passwordField.html">passwordField</a> - For input fields of type 'password'</p>
</li>
<li>
<p><a href="../ref/Tags/checkBox.html">checkBox</a> - For input fields of type 'checkbox'</p>
</li>
<li>
<p><a href="../ref/Tags/radio.html">radio</a> - For input fields of type 'radio'</p>
</li>
<li>
<p><a href="../ref/Tags/hiddenField.html">hiddenField</a> - For input fields of type 'hidden'</p>
</li>
<li>
<p><a href="../ref/Tags/select.html">select</a> - For dealing with HTML select boxes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of these allows GSP expressions for the value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:textField</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myField</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${myValue}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>GSP also contains extended helper versions of the above tags such as <a href="../ref/Tags/radioGroup.html">radioGroup</a> (for creating groups of <a href="../ref/Tags/radio.html">radio</a> tags), <a href="../ref/Tags/localeSelect.html">localeSelect</a>, <a href="../ref/Tags/currencySelect.html">currencySelect</a> and <a href="../ref/Tags/timeZoneSelect.html">timeZoneSelect</a> (for selecting locales, currencies and time zones respectively).</p>
</div>
</div>
<div class="sect3">
<h4 id="_multiple_submit_buttons">Multiple Submit Buttons</h4>
<div class="paragraph">
<p>The age-old problem of dealing with multiple submit buttons is also handled elegantly with Grails using the <a href="../ref/Tags/actionSubmit.html">actionSubmit</a> tag. It is just like a regular submit, but lets you specify an alternative action to submit to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:actionSubmit</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Some update label</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">update</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
</div>


<h2 id="tagsAsMethodCalls">3.6 Tags as Method Calls</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/tags/tagsAsMethodCalls.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div id="tagsAsMethodCalls" class="paragraph">
<p>One major different between GSP tags and other tagging technologies is that GSP tags can be called as either regular tags or as method calls from <a href="https://docs.grails.org/6.2.1/guide/theWebLayer.html#controllers">controllers</a>, <a href="taglibs.html">tag libraries</a> or GSP views.</p>
</div>
<div class="sect3">
<h4 id="_tags_as_method_calls_from_gsps">Tags as method calls from GSPs</h4>
<div class="paragraph">
<p>Tags return their results as a String-like object (a <code>StreamCharBuffer</code> which has all of the same methods as String) instead of writing directly to the response when called as methods. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="gsp">Static Resource: ${createLinkTo(dir: &quot;images&quot;, file: &quot;logo.jpg&quot;)}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is particularly useful for using a tag within an attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${createLinkTo(dir: 'images', file: 'logo.jpg')}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In view technologies that don&#8217;t support this feature you have to nest tags within tags, which becomes messy quickly and often has an adverse effect of WYSIWYG tools that attempt to render the mark-up as it is not well-formed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;g:createLinkTo dir='images' file='logo.jpg'/</span></span><span class="error">&gt;</span>&quot; /<span class="error">&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tags_as_method_calls_from_controllers_and_tag_libraries">Tags as method calls from Controllers and Tag Libraries</h4>
<div class="paragraph">
<p>You can also invoke tags from controllers and tag libraries. Tags within the default <code>g:</code> <a href="#namespaces">namespace</a> can be invoked without the prefix and a <code>StreamCharBuffer</code> result is returned:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> imageLocation = createLinkTo(<span class="key">dir</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">images</span><span class="delimiter">&quot;</span></span>, <span class="key">file</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">logo.jpg</span><span class="delimiter">&quot;</span></span>).toString()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Prefix the namespace to avoid naming conflicts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> imageLocation = g.createLinkTo(<span class="key">dir</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">images</span><span class="delimiter">&quot;</span></span>, <span class="key">file</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">logo.jpg</span><span class="delimiter">&quot;</span></span>).toString()</code></pre>
</div>
</div>
<div class="paragraph">
<p>For tags that use a <a href="#namespaces">custom namespace</a>, use that prefix for the method call. For example (from the <a href="https://github.com/stefanogualdi/grails-ckeditor">CK Editor plugin</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> editor = ckeditor.editor(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>, <span class="key">width</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">100%</span><span class="delimiter">&quot;</span></span>, <span class="key">height</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">400</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</div>


<h1 id="viewsAndTemplates">4 Views and Templates</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/viewsAndTemplates.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Grails also has the concept of templates. These are useful for partitioning your views into maintainable chunks, and combined with <a href="#layouts">Layouts</a> provide a highly re-usable mechanism for structured views.</p>
</div>
<div class="sect3">
<h4 id="_template_basics">Template Basics</h4>
<div class="paragraph">
<p>Grails uses the convention of placing an underscore before the name of a view to identify it as a template. For example, you might have a template that renders Books located at <code>grails-app/views/book/_bookTemplate.gsp</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${book?.id}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
   <span class="tag">&lt;div&gt;</span>Title: ${book?.title}<span class="tag">&lt;/div&gt;</span>
   <span class="tag">&lt;div&gt;</span>Author: ${book?.author?.name}<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the <a href="../ref/Tags/render.html">render</a> tag to render this template from one of the views in <code>grails-app/views/book</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:render</span> <span class="attribute-name">template</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookTemplate</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[book: myBook]</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice how we pass into a model to use using the <code>model</code> attribute of the <code>render</code> tag. If you have multiple <code>Book</code> instances you can also render the template for each <code>Book</code> using the render tag with a <code>collection</code> attribute:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:render</span> <span class="attribute-name">template</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookTemplate</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">collection</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${bookList}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_shared_templates">Shared Templates</h4>
<div class="paragraph">
<p>In the previous example we had a template that was specific to the <code>BookController</code> and its views at <code>grails-app/views/book</code>. However, you may want to share templates across your application.</p>
</div>
<div class="paragraph">
<p>In this case you can place them in the root views directory at grails-app/views or any subdirectory below that location, and then with the template attribute use an absolute location starting with <code>/</code> instead of a relative location. For example if you had a template called <code>grails-app/views/shared/_mySharedTemplate.gsp</code>, you would reference it as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:render</span> <span class="attribute-name">template</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/shared/mySharedTemplate</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use this technique to reference templates in any directory from any view or controller:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:render</span> <span class="attribute-name">template</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/book/bookTemplate</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[book: myBook]</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_template_namespace">The Template Namespace</h4>
<div class="paragraph">
<p>Since templates are used so frequently there is template namespace, called <code>tmpl</code>, available that makes using templates easier. Consider for example the following usage pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:render</span> <span class="attribute-name">template</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookTemplate</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">[book:myBook]</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This can be expressed with the <code>tmpl</code> namespace as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;tmpl:bookTemplate</span> <span class="attribute-name">book</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${myBook}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_templates_in_controllers_and_tag_libraries">Templates in Controllers and Tag Libraries</h4>
<div class="paragraph">
<p>You can also render templates from controllers using the <a href="https://docs.grails.org/6.2.1/ref/Controllers/render.html">render</a> controller method. This is useful for JavaScript heavy applications where you generate small HTML or data responses to partially update the current page instead of performing new request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> <span class="function">bookData</span>() {
    <span class="keyword">def</span> b = <span class="predefined-type">Book</span>.get(params.id)
    render(<span class="key">template</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">bookTemplate</span><span class="delimiter">&quot;</span></span>, <span class="key">model</span>:[<span class="key">book</span>:b])
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <a href="https://docs.grails.org/6.2.1/ref/Controllers/render.html">render</a> controller method writes directly to the response, which is the most common behaviour. To instead obtain the result of template as a String you can use the <a href="../ref/Tags/render.html">render</a> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> <span class="function">bookData</span>() {
    <span class="keyword">def</span> b = <span class="predefined-type">Book</span>.get(params.id)
    <span class="predefined-type">String</span> content = g.render(<span class="key">template</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">bookTemplate</span><span class="delimiter">&quot;</span></span>, <span class="key">model</span>:[<span class="key">book</span>:b])
    render content
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice the usage of the <code>g</code> namespace which tells Grails we want to use the <a href="#tagsAsMethodCalls">tag as method call</a> instead of the <a href="https://docs.grails.org/6.2.1/ref/Controllers/render.html">render</a> method.</p>
</div>
</div>


<h1 id="layouts">5 Layouts with Sitemesh</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/layouts.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="sect3">
<h4 id="_creating_layouts">Creating Layouts</h4>
<div class="paragraph">
<p>Grails leverages <a href="https://github.com/sitemesh">Sitemesh</a>, a decorator engine, to support view layouts. Layouts are located in the <code>grails-app/views/layouts</code> directory. A typical layout can be seen below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;title&gt;</span><span class="tag">&lt;g:layoutTitle</span> <span class="attribute-name">default</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">An example decorator</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span><span class="tag">&lt;/title&gt;</span>
        <span class="tag">&lt;g:layoutHead</span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body</span> <span class="attribute-name">onload</span>=<span class="string"><span class="delimiter">&quot;</span><span class="predefined">$</span>{pageProperty(name:<span class="string"><span class="delimiter">'</span><span class="content">body.onload</span><span class="delimiter">'</span></span>)}<span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">menu</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="comment">&lt;!--my common menu goes here--&gt;</span><span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">body</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;g:layoutBody</span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The key elements are the <a href="../ref/Tags/layoutHead.html">layoutHead</a>, <a href="../ref/Tags/layoutTitle.html">layoutTitle</a> and <a href="../ref/Tags/layoutBody.html">layoutBody</a> tag invocations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>layoutTitle</code> - outputs the target page&#8217;s title</p>
</li>
<li>
<p><code>layoutHead</code> - outputs the target page&#8217;s head tag contents</p>
</li>
<li>
<p><code>layoutBody</code> - outputs the target page&#8217;s body tag contents</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The previous example also demonstrates the <a href="../ref/Tags/pageProperty.html">pageProperty</a> tag which can be used to inspect and return aspects of the target page.</p>
</div>
</div>
<div class="sect3">
<h4 id="_triggering_layouts">Triggering Layouts</h4>
<div class="paragraph">
<p>There are a few ways to trigger a layout. The simplest is to add a meta tag to the view:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;title&gt;</span>An Example Page<span class="tag">&lt;/title&gt;</span>
        <span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">layout</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">main</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>This is my content!<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case a layout called <code>grails-app/views/layouts/main.gsp</code> will be used to lay out the page. If we were to use the layout from the previous section the output would resemble this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;title&gt;</span>An Example Page<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body</span> <span class="attribute-name">onload</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">menu</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="comment">&lt;!--my common menu goes here--&gt;</span><span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">body</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            This is my content!
        <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_specifying_a_layout_in_a_controller">Specifying A Layout In A Controller</h4>
<div class="paragraph">
<p>Another way to specify a layout is to specify the name of the layout by assigning a value to the "layout" property in a controller. For example, if you have a controller such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BookController</span> {
    <span class="directive">static</span> layout = <span class="string"><span class="delimiter">'</span><span class="content">customer</span><span class="delimiter">'</span></span>

    <span class="keyword">def</span> <span class="function">list</span>() { <span class="comment">/*...*/</span> }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can create a layout called <code>grails-app/views/layouts/customer.gsp</code> which will be applied to all views that the <code>BookController</code> delegates to.  The value of the <code>layout</code> property may contain a directory structure relative to the <code>grails-app/views/layouts/</code> directory.  For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BookController</span> {
    <span class="directive">static</span> layout = <span class="string"><span class="delimiter">'</span><span class="content">custom/customer</span><span class="delimiter">'</span></span>

    <span class="keyword">def</span> <span class="function">list</span>() { <span class="comment">/*...*/</span> }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Views rendered from that controller would be decorated with the <code>grails-app/views/layouts/custom/customer.gsp</code> template.</p>
</div>
</div>
<div class="sect3">
<h4 id="_layout_by_convention">Layout by Convention</h4>
<div class="paragraph">
<p>Another way to associate layouts is to use "layout by convention". For example, if you have this controller:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">BookController</span> {
    <span class="keyword">def</span> <span class="function">list</span>() { <span class="comment">/*...*/</span> }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can create a layout called <code>grails-app/views/layouts/book.gsp</code>, which will be applied to all views that the <code>BookController</code> delegates to.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can create a layout called <code>grails-app/views/layouts/book/list.gsp</code> which will only be applied to the <code>list</code> action within the <code>BookController</code>.</p>
</div>
<div class="paragraph">
<p>If you have both the above-mentioned layouts in place the layout specific to the action will take precedence when the list action is executed.</p>
</div>
<div class="paragraph">
<p>If a layout is not located using any of those conventions, the convention of last resort is to look for the application default layout which
is <code>grails-app/views/layouts/application.gsp</code>.  The name of the application default layout may be changed by defining the property <code>grails.sitemesh.default.layout</code>
in the application configuration as follows:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/conf/application.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">grails.sitemesh.default.layout</span>: <span class="string"><span class="content">myLayoutName</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With that property in place, the application default layout will be <code>grails-app/views/layouts/myLayoutName.gsp</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_inline_layouts">Inline Layouts</h4>
<div class="paragraph">
<p>Grails' also supports Sitemesh&#8217;s concept of inline layouts with the <a href="../ref/Tags/applyLayout.html">applyLayout</a> tag. This can be used to apply a layout to a template, URL or arbitrary section of content. This lets you even further modularize your view structure by "decorating" your template includes.</p>
</div>
<div class="paragraph">
<p>Some examples of usage can be seen below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:applyLayout</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myLayout</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">template</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bookTemplate</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">collection</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${books}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

<span class="tag">&lt;g:applyLayout</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myLayout</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">url</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">https://www.google.com</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

<span class="tag">&lt;g:applyLayout</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myLayout</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
The content to apply a layout to
<span class="tag">&lt;/g:applyLayout&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_server_side_includes">Server-Side Includes</h4>
<div class="paragraph">
<p>While the <a href="../ref/Tags/applyLayout.html">applyLayout</a> tag is useful for applying layouts to external content, if you simply want to include external content in the current page you use the <a href="../ref/Tags/include.html">include</a> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:include</span> <span class="attribute-name">controller</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can even combine the <a href="../ref/Tags/include.html">include</a> tag and the <a href="../ref/Tags/applyLayout.html">applyLayout</a> tag for added flexibility:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:applyLayout</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myLayout</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
   <span class="tag">&lt;g:include</span> <span class="attribute-name">controller</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/g:applyLayout&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, you can also call the <a href="../ref/Tags/include.html">include</a> tag from a controller or tag library as a method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> content = include(<span class="key">controller</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>, <span class="key">action</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">list</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting content will be provided via the return value of the <a href="../ref/Tags/include.html">include</a> tag.</p>
</div>
</div>


<h2 id="sitemeshContentBlocks">5.1 Sitemesh Content Blocks</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/sitemeshContentBlocks.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Although it is useful to decorate an entire page sometimes you may find the need to decorate independent sections of your site. To do this you can use content blocks. To get started, partition the page to be decorated using the <code>&lt;content&gt;</code> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;content</span> <span class="attribute-name">tag</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">navbar</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
... draw the navbar here...
<span class="tag">&lt;/content&gt;</span>

<span class="tag">&lt;content</span> <span class="attribute-name">tag</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">header</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
... draw the header here...
<span class="tag">&lt;/content&gt;</span>

<span class="tag">&lt;content</span> <span class="attribute-name">tag</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">footer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
... draw the footer here...
<span class="tag">&lt;/content&gt;</span>

<span class="tag">&lt;content</span> <span class="attribute-name">tag</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">body</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
... draw the body here...
<span class="tag">&lt;/content&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then within the layout you can reference these components and apply individual layouts to each:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;html&gt;</span>
    <span class="tag">&lt;body&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">header</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;g:applyLayout</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">headerLayout</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;g:pageProperty</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">page.header</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;/g:applyLayout&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">nav</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;g:applyLayout</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">navLayout</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;g:pageProperty</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">page.navbar</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;/g:applyLayout&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">body</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;g:applyLayout</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bodyLayout</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;g:pageProperty</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">page.body</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;/g:applyLayout&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">footer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;g:applyLayout</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">footerLayout</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;g:pageProperty</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">page.footer</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
            <span class="tag">&lt;/g:applyLayout&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>


<h1 id="resources">6 Static Resources</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/resources.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Since version 3, Grails integrates with the <a href="https://github.com/bertramdev/asset-pipeline">Asset Pipeline plugin</a> to provide sophisticated static asset management. This plugin is installed by default in new Grails applications.</p>
</div>
<div class="paragraph">
<p>The basic way to include a link to a static asset in your application is to use the <a href="../ref/Tags/resource.html">resource</a> tag. This simple approach creates a URI pointing to the file.</p>
</div>
<div class="paragraph">
<p>However, modern applications with dependencies on multiple JavaScript and CSS libraries and frameworks (as well as dependencies on multiple Grails plugins) require something more powerful.</p>
</div>
<div class="paragraph">
<p>The issues that the Asset-Pipeline plugin tackles are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reduced Dependence - The plugin has compression, minification, and cache-digests built in.</p>
</li>
<li>
<p>Easy Debugging - Makes for easy debugging by keeping files separate in development mode.</p>
</li>
<li>
<p>Asset Bundling using require <a href="http://asset-pipeline.com/manual/index.html#directives">directives</a>.</p>
</li>
<li>
<p>Web application performance tuning is difficult.</p>
</li>
<li>
<p>The need for a standard way to expose static assets in plugins and applications.</p>
</li>
<li>
<p>The need for extensible processing to make languages like LESS or Coffee first class citizens.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The asset-pipeline allows you to define your javascript or css requirements right at the top of the file, and they get compiled on War creation.</p>
</div>
<div class="paragraph">
<p>Take a look at the <a href="http://asset-pipeline.com/manual">documentation</a> for the asset-pipeline to get started.</p>
</div>
<div class="paragraph">
<p>If you do not want to use the Asset-Pipeline plugin, you can serve the static assets from directories <code>src/main/resources/public</code> or <code>src/main/webapp</code>, but the latter one only gets included in WAR packaging but not in JAR packaging.</p>
</div>
<div class="paragraph">
<p>For example, if you had a file stored at <code>/src/main/resources/public/images/example.jpg</code> and your Grails application was running on port 8080, then you could access the file by navigating to <a href="http://localhost:8080/static/images/example.jpg">http://localhost:8080/static/images/example.jpg</a>.</p>
</div>
<div class="sect3">
<h4 id="_cache_configuration_for_static_resources">Cache Configuration for Static Resources</h4>
<div class="paragraph">
<p>By default, files under <code>src/main/resources/public</code> or <code>src/main/webapp</code> are served with an HTTP response header of <code>Cache-Control: no-store</code>.
To have them be cached by the browser, you can set the configuration setting <code>grails.resources.cachePeriod: number</code> in <code>application.yml</code> so that they are served with a response header of <code>Cache-Control: max-age=number</code> indicating to the browser how many seconds the file should be considered fresh.</p>
</div>
</div>


<h1 id="makingChangesToADeployedApplication">7 Making Changes to a Deployed Application</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/makingChangesToADeployedApplication.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>One of the main issues with deploying a Grails application (or typically any servlet-based application) is that any change to the views requires that you redeploy your whole application. If all you want to do is fix a typo on a page, or change an image link, it can seem like a lot of unnecessary work. For such simple requirements, Grails does have a solution: the  <code>grails.gsp.view.dir</code>  configuration setting.</p>
</div>
<div class="paragraph">
<p>How does this work? The first step is to decide where the GSP files should go. Let&#8217;s say we want to keep them unpacked in a  <code>/var/www/grails/my-app</code>  directory. We add these two properties to the application configuration:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/conf/application.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">grails.gsp.enable.reload</span>: <span class="string"><span class="content">true</span></span>
<span class="key">grails.gsp.view.dir</span>: <span class="string"><span class="content">/var/www/grails/my-app/</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The first line tells Grails that modified GSP files should be reloaded at runtime. If you don&#8217;t have this setting, you can make as many changes as you like, but they won&#8217;t be reflected in the running application until you restart. The second line tells Grails where to load the views and layouts from.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The trailing slash on the  <code>grails.gsp.view.dir</code>  value is important! Without it, Grails will look for views in the parent directory.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Setting <code>grails.gsp.view.dir</code> is optional. If it&#8217;s not specified, you can update files directly to the application server&#8217;s deployed war directory. Depending on the application server, these files might get overwritten when the server is restarted. Most application servers support "exploded war deployment" which is recommended in this case.</p>
</div>
<div class="paragraph">
<p>With those settings in place, all you need to do is copy the views from your web application to the external directory. On a Unix-like system, this would look something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mkdir -p /var/www/grails/my-app/grails-app/views
cp -R grails-app/views/* /var/www/grails/my-app/grails-app/views</pre>
</div>
</div>
<div class="paragraph">
<p>The key point here is that you must retain the view directory structure, including the  <code>grails-app/views</code>  bit. So you end up with the path  <code>/var/www/grails/my-app/grails-app/views/&#8230;&#8203;</code> .</p>
</div>
<div class="paragraph">
<p>One thing to bear in mind with this technique is that every time you modify a GSP, it uses up permgen space. So at some point you will eventually hit "out of permgen space" errors unless you restart the server. So this technique is not recommended for frequent or large changes to the views.</p>
</div>
<div class="paragraph">
<p>There are also some system properties to control GSP reloading:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">grails.gsp.enable.reload</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">system property for enabling the GSP reload mode (alternative to adding it in the file-based application configuration</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">grails.gsp.reload.interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">interval between checking the lastmodified time of the gsp source file, unit is milliseconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">grails.gsp.reload.granularity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the number of milliseconds leeway to give before deciding a file is out of date. this is needed because different roundings usually cause a 1000ms difference in lastmodified times</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>GSP reloading is supported for precompiled GSPs since Grails 1.3.5.</p>
</div>


<h1 id="taglibs">8 Tag Libraries</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/taglibs.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Like <a href="https://www.oracle.com/java/technologies/jspt.html">Java Server Pages</a> (JSP), GSP supports the concept of custom tag libraries. Unlike JSP, Grails' tag library mechanism is simple, elegant and completely reloadable at runtime.</p>
</div>
<div class="paragraph">
<p>Quite simply, to create a tag library create a Groovy class that ends with the convention <code>TagLib</code> and place it within the <code>grails-app/taglib</code> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">SimpleTagLib</span> {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now to create a tag create a Closure property that takes two arguments: the tag attributes and the body content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">SimpleTagLib</span> {
    <span class="keyword">def</span> simple = { attrs, body -&gt;

    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>attrs</code> argument is a Map of the attributes of the tag, whilst the <code>body</code> argument is a Closure that returns the body content when invoked:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">SimpleTagLib</span> {
    <span class="keyword">def</span> emoticon = { attrs, body -&gt;
       out &lt;&lt; body() &lt;&lt; (attrs.happy == <span class="string"><span class="delimiter">'</span><span class="content">true</span><span class="delimiter">'</span></span> ? <span class="string"><span class="delimiter">&quot;</span><span class="content"> :-)</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content"> :-(</span><span class="delimiter">&quot;</span></span>)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As demonstrated above there is an implicit <code>out</code> variable that refers to the output <code>Writer</code> which you can use to append content to the response. Then you can reference the tag inside your GSP; no imports are necessary:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:emoticon</span> <span class="attribute-name">happy</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Hi John<span class="tag">&lt;/g:emoticon&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To help IDEs like Spring Tool Suite (STS) and others autocomplete tag attributes, you should add Javadoc comments to your tag closures with <code>@attr</code> descriptions. Since taglibs use Groovy code it can be difficult to reliably detect all usable attributes.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">SimpleTagLib</span> {

    <span class="comment">/**
     * Renders the body with an emoticon.
     *
     * @attr happy whether to show a happy emoticon ('true') or
     * a sad emoticon ('false')
     */</span>
    <span class="keyword">def</span> emoticon = { attrs, body -&gt;
       out &lt;&lt; body() &lt;&lt; (attrs.happy == <span class="string"><span class="delimiter">'</span><span class="content">true</span><span class="delimiter">'</span></span> ? <span class="string"><span class="delimiter">&quot;</span><span class="content"> :-)</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content"> :-(</span><span class="delimiter">&quot;</span></span>)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and any mandatory attributes should include the REQUIRED keyword, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">SimpleTagLib</span> {

    <span class="comment">/**
     * Creates a new password field.
     *
     * @attr name REQUIRED the field name
     * @attr value the field value
     */</span>
    <span class="keyword">def</span> passwordField = { attrs -&gt;
        attrs.type = <span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>
        attrs.tagName = <span class="string"><span class="delimiter">&quot;</span><span class="content">passwordField</span><span class="delimiter">&quot;</span></span>
        fieldImpl(out, attrs)
    }
}</code></pre>
</div>
</div>


<h2 id="taglibVariablesAndScopes">8.1 Variables and Scopes</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/taglibs/taglibVariablesAndScopes.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Within the scope of a tag library there are a number of pre-defined variables including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>actionName</code> - The currently executing action name</p>
</li>
<li>
<p><code>controllerName</code> - The currently executing controller name</p>
</li>
<li>
<p><code>flash</code> - The <a href="https://docs.grails.org/6.2.1/ref/Controllers/flash.html">flash</a> object</p>
</li>
<li>
<p><code>grailsApplication</code> - The <a href="https://docs.grails.org/6.2.1/api/grails/core/GrailsApplication.html">GrailsApplication</a> instance</p>
</li>
<li>
<p><code>out</code> - The response writer for writing to the output stream</p>
</li>
<li>
<p><code>pageScope</code> - A reference to the <a href="../ref/Tag%20Libraries/pageScope.html">pageScope</a> object used for GSP rendering (i.e. the binding)</p>
</li>
<li>
<p><code>params</code> - The <a href="https://docs.grails.org/6.2.1/ref/Controllers/params.html">params</a> object for retrieving request parameters</p>
</li>
<li>
<p><code>pluginContextPath</code> - The context path to the plugin that contains the tag library</p>
</li>
<li>
<p><code>request</code> - The <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html">HttpServletRequest</a> instance</p>
</li>
<li>
<p><code>response</code> - The <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletResponse.html">HttpServletResponse</a> instance</p>
</li>
<li>
<p><code>servletContext</code> - The <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/ServletContext.html">javax.servlet.ServletContext</a> instance</p>
</li>
<li>
<p><code>session</code> - The <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpSession.html">HttpSession</a> instance</p>
</li>
</ul>
</div>


<h2 id="simpleTags">8.2 Simple Tags</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/taglibs/simpleTags.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>As demonstrated in the previous example it is easy to write simple tags that have no body and just output content. Another example is a <code>dateFormat</code> style tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> dateFormat = { attrs, body -&gt;
    out &lt;&lt; <span class="keyword">new</span> java.text.SimpleDateFormat(attrs.format).format(attrs.date)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above uses Java&#8217;s <code>SimpleDateFormat</code> class to format a date and then write it to the response. The tag can then be used within a GSP as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:dateFormat</span> <span class="attribute-name">format</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dd-MM-yyyy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">date</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${new Date()}</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With simple tags sometimes you need to write HTML mark-up to the response. One approach would be to embed the content directly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> formatBook = { attrs, body -&gt;
    out &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;div id=</span><span class="char">\&quot;</span><span class="inline"><span class="inline-delimiter">${</span>attrs.book.id<span class="inline-delimiter">}</span></span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span>
    out &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">Title : </span><span class="inline"><span class="inline-delimiter">${</span>attrs.book.title<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>
    out &lt;&lt; <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/div&gt;</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Although this approach may be tempting it is not very clean. A better approach would be to reuse the <a href="../ref/Tags/render.html">render</a> tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> formatBook = { attrs, body -&gt;
    out &lt;&lt; render(<span class="key">template</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bookTemplate</span><span class="delimiter">&quot;</span></span>, <span class="key">model</span>: [<span class="key">book</span>: attrs.book])
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then have a separate GSP template that does the actual rendering.</p>
</div>


<h2 id="logicalTags">8.3 Logical Tags</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/taglibs/logicalTags.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>You can also create logical tags where the body of the tag is only output once a set of conditions have been met. An example of this may be a set of security tags:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> isAdmin = { attrs, body -&gt;
    <span class="keyword">def</span> user = attrs.user
    <span class="keyword">if</span> (user &amp;&amp; checkUserPrivs(user)) {
        out &lt;&lt; body()
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The tag above checks if the user is an administrator and only outputs the body content if he/she has the correct set of access privileges:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:isAdmin</span> <span class="attribute-name">user</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${myUser}</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    // some restricted content
<span class="tag">&lt;/g:isAdmin&gt;</span></code></pre>
</div>
</div>


<h2 id="iterativeTags">8.4 Iterative Tags</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/taglibs/iterativeTags.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Iterative tags are easy too, since you can invoke the body multiple times:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> repeat = { attrs, body -&gt;
    attrs.times?.toInteger()?.times { num -&gt;
        out &lt;&lt; body(num)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example we check for a <code>times</code> attribute and if it exists convert it to a number, then use Groovy&#8217;s <code>times</code> method to iterate the specified number of times:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:repeat</span> <span class="attribute-name">times</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;p&gt;</span>Repeat this 3 times! Current repeat = ${it}<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/g:repeat&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice how in this example we use the implicit <code>it</code> variable to refer to the current number. This works because when we invoked the body we passed in the current value inside the iteration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">out &lt;&lt; body(num)</code></pre>
</div>
</div>
<div class="paragraph">
<p>That value is then passed as the default variable <code>it</code> to the tag. However, if you have nested tags this can lead to conflicts, so you should instead name the variables that the body uses:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> repeat = { attrs, body -&gt;
    <span class="keyword">def</span> <span class="type">var</span> = attrs.var ?: <span class="string"><span class="delimiter">&quot;</span><span class="content">num</span><span class="delimiter">&quot;</span></span>
    attrs.times?.toInteger()?.times { num -&gt;
        out &lt;&lt; body((<span class="type">var</span>):num)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we check if there is a <code>var</code> attribute and if there is use that as the name to pass into the body invocation on this line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">out &lt;&lt; body((<span class="type">var</span>):num)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note the usage of the parenthesis around the variable name. If you omit these Groovy assumes you are using a String key and not referring to the variable itself.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we can change the usage of the tag as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;g:repeat</span> <span class="attribute-name">times</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">var</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">j</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;p&gt;</span>Repeat this 3 times! Current repeat = ${j}<span class="tag">&lt;/p&gt;</span>
<span class="tag">&lt;/g:repeat&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice how we use the <code>var</code> attribute to define the name of the variable <code>j</code> and then we are able to reference that variable within the body of the tag.</p>
</div>


<h2 id="namespaces">8.5 Tag Namespaces</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/taglibs/namespaces.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>By default, tags are added to the default Grails namespace and are used with the <code>g:</code> prefix in GSP pages. However, you can specify a different namespace by adding a static property to your <code>TagLib</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">SimpleTagLib</span> {
    <span class="directive">static</span> namespace = <span class="string"><span class="delimiter">&quot;</span><span class="content">my</span><span class="delimiter">&quot;</span></span>

    <span class="keyword">def</span> example = { attrs -&gt;
        <span class="comment">//...</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we have specified a <code>namespace</code> of <code>my</code> and hence the tags in this tag lib must then be referenced from GSP pages like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;my:example</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">...</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where the prefix is the same as the value of the static <code>namespace</code> property. Namespaces are particularly useful for plugins.</p>
</div>
<div class="paragraph">
<p>Tags within namespaces can be invoked as methods using the namespace as a prefix to the method call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">out &lt;&lt; my.example(<span class="key">name</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This works from GSP, controllers or tag libraries</p>
</div>


<h2 id="usingJSPTagLibraries">8.6 Using JSP Tag Libraries</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/taglibs/usingJSPTagLibraries.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>In addition to the simplified tag library mechanism provided by GSP, you can also use JSP tags from GSP.</p>
</div>
<div class="paragraph">
<p>In order to use JSP support you must ensure you have the <code>grails-web-jsp</code> dependency on your classpath by adding it to your <code>build.gradle</code> file:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
    //...
    runtimeOnly "org.grails:grails-web-jsp:6.2.3"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you will need to declare the JSP taglib to use with the <code>taglib</code> directive at the top of your GSP file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="error">&lt;</span>%@ taglib prefix=&quot;fmt&quot; uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot; %<span class="error">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Besides this you have to configure Grails to scan for the JSP tld files.
This is configured with the <code>grails.gsp.tldScanPattern</code> setting. It accepts a comma separated String value. Spring&#8217;s PathMatchingResourcePatternResolver is used to resolve the patterns.</p>
</div>
<div class="paragraph">
<p>For example, you could scan for all available tld files by adding this to <code>application.yml</code>:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/conf/application.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">grails</span>:
    <span class="key">gsp</span>:
        <span class="key">tldScanPattern</span>: <span class="string"><span class="content">'classpath*:/META-INF/*.tld,/WEB-INF/tld/*.tld'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>JSTL standard library is no longer added as a dependency by default. In case you are using JSTL, you should also add these dependencies to <code>build.gradle</code>:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
    <span class="comment">//...</span>
    runtimeOnly <span class="string"><span class="delimiter">'</span><span class="content">javax.servlet:jstl:1.1.2</span><span class="delimiter">'</span></span>
    runtimeOnly <span class="string"><span class="delimiter">'</span><span class="content">taglibs:standard:1.1.2</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can use JSP tags like any other tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;fmt:formatNumber</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${10}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">pattern</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">.00</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With the added bonus that you can invoke JSP tags like methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="gsp">${fmt.formatNumber(value:10, pattern:&quot;.00&quot;)}</code></pre>
</div>
</div>


<h2 id="tagReturnValue">8.7 Tag return value</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails/grails-gsp/edit/6.2.x/src/main/docs/guide/taglibs/tagReturnValue.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>A taglib can be used in a GSP as an ordinary tag, or it might be used as a function in other taglibs or GSP expressions.</p>
</div>
<div class="paragraph">
<p>Internally Grails intercepts calls to taglib closures.
The "out" that is available in a taglib is mapped to a <code>java.io.Writer</code> implementation that writes to a buffer
that "captures" the output of the taglib call. This buffer is the return value of a tag library call when it&#8217;s
used as a function.</p>
</div>
<div class="paragraph">
<p>If the tag is listed in the library&#8217;s static <code>returnObjectForTags</code> array, then its return value will be written to
the output when it&#8217;s used as a normal tag. The return value of the tag lib closure will be returned as-is
if it&#8217;s used as a function in GSP expressions or other taglibs.</p>
</div>
<div class="paragraph">
<p>If the tag is not included in the returnObjectForTags array, then its return value will be discarded.
Using "out" to write output in returnObjectForTags is not supported.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">ObjectReturningTagLib</span> {
        <span class="directive">static</span> namespace = <span class="string"><span class="delimiter">&quot;</span><span class="content">cms</span><span class="delimiter">&quot;</span></span>
        <span class="directive">static</span> returnObjectForTags = [<span class="string"><span class="delimiter">'</span><span class="content">content</span><span class="delimiter">'</span></span>]

        <span class="keyword">def</span> content = { attrs, body -&gt;
                CmsContent.findByCode(attrs.code)?.content
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Given this example <code>cms.content(code: 'something')</code> call in another taglib or GSP expression would return the value <code>CmsContent.content</code> directly to the caller without
wrapping the return value in a buffer. It might be worth doing so also because of performance optimization reasons. There is no need to wrap the
tag return value in an output buffer in such cases.</p>
</div>

            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
             <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tag Libraries</h1><div class="menu-sub">
                        
                        <div class="menu-item"><a href="../ref/Tag%20Libraries/Usage.html">Usage</a></div>
                        
                        
                        <div class="menu-item"><a href="../ref/Tag%20Libraries/actionName.html">actionName</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tag%20Libraries/controllerName.html">controllerName</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tag%20Libraries/flash.html">flash</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tag%20Libraries/pageScope.html">pageScope</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tag%20Libraries/params.html">params</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tag%20Libraries/request.html">request</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tag%20Libraries/response.html">response</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tag%20Libraries/servletContext.html">servletContext</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tag%20Libraries/session.html">session</a>
                        </div>
                        
                        </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tags</h1><div class="menu-sub">
                        
                        
                        <div class="menu-item"><a href="../ref/Tags/actionSubmit.html">actionSubmit</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/actionSubmitImage.html">actionSubmitImage</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/applyLayout.html">applyLayout</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/checkBox.html">checkBox</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/collect.html">collect</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/cookie.html">cookie</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/country.html">country</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/countrySelect.html">countrySelect</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/createLink.html">createLink</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/createLinkTo.html">createLinkTo</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/currencySelect.html">currencySelect</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/datePicker.html">datePicker</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/each.html">each</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/eachError.html">eachError</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/else.html">else</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/elseif.html">elseif</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/external.html">external</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/field.html">field</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/fieldError.html">fieldError</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/fieldValue.html">fieldValue</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/findAll.html">findAll</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/form.html">form</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/formatBoolean.html">formatBoolean</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/formatDate.html">formatDate</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/formatNumber.html">formatNumber</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/grep.html">grep</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/hasErrors.html">hasErrors</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/header.html">header</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/hiddenField.html">hiddenField</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/if.html">if</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/img.html">img</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/include.html">include</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/isAvailable.html">isAvailable</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/isNotAvailable.html">isNotAvailable</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/javascript.html">javascript</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/join.html">join</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/layoutBody.html">layoutBody</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/layoutHead.html">layoutHead</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/layoutTitle.html">layoutTitle</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/link.html">link</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/localeSelect.html">localeSelect</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/message.html">message</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/meta.html">meta</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/pageProperty.html">pageProperty</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/paginate.html">paginate</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/passwordField.html">passwordField</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/radio.html">radio</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/radioGroup.html">radioGroup</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/render.html">render</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/renderErrors.html">renderErrors</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/resource.html">resource</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/select.html">select</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/set.html">set</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/sortableColumn.html">sortableColumn</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/submitButton.html">submitButton</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/textArea.html">textArea</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/textField.html">textField</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/timeZoneSelect.html">timeZoneSelect</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/unless.html">unless</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/uploadForm.html">uploadForm</a>
                        </div>
                        
                        <div class="menu-item"><a href="../ref/Tags/while.html">while</a>
                        </div>
                        
                        </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>


</body>
</html>
